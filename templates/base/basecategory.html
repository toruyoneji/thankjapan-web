<!DOCTYPE html>
<html lang="{{ lang_code|default:'en' }}" translate="no">
{% load static %}
<head>
    {% include 'css.html' %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="icon" href="https://res.cloudinary.com/dotekofm5/image/upload/w_96,h_96,c_fill/v1768197979/thankjapan/backgrounds/lzqkopi7hngponvt8ekw.png" sizes="96x96" type="image/png">
    <link rel="apple-touch-icon" href="https://res.cloudinary.com/dotekofm5/image/upload/w_180,h_180,c_fill/v1768197979/thankjapan/backgrounds/lzqkopi7hngponvt8ekw.png">

    {% block meta %}
    <meta name="description" content="{% block description %}This site introduces aspects of Japanese life, culture, food, and more.{% endblock %}" />
    <meta name="robots" content="index,follow">
    <meta name="keywords" content="Japanese, japan">
    
    <link rel="canonical" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}{% if lang_code %}?lang={{ lang_code }}{% endif %}{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />

    <link rel="alternate" hreflang="x-default" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}{% if page_obj and page_obj.number > 1 %}?page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="en" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=en{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="ja" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=ja{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="de" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=de{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="fr" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=fr{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="it" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=it{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="es-ES" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=es-es{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="es-MX" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=es-mx{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="ko" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=ko{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="pt-PT" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=pt{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="pt-BR" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=pt-br{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="vi" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=vi{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="th" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=th{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="zh-Hant" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=zh-hant{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />
    <link rel="alternate" hreflang="zh-Hans" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}?lang=zh-cn{% if page_obj and page_obj.number > 1 %}&page={{ page_obj.number }}{% endif %}" />


    <meta property="og:title" content="{% block og_title %}Discover Japan: Culture, Food & Fun Games{% endblock %}" />
    <meta property="og:description" content="{% block og_description %}Japanese introduction site.{% endblock %}" />
    <meta property="og:url" content="{% block og_url %}{{ request.build_absolute_uri }}{% endblock %}" />

    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://res.cloudinary.com/dotekofm5/image/upload/v1768385674/thankjapan/backgrounds/gx8xbypllgs1qogcsvak.jpg" />

    <meta property="og:site_name" content="ThankJapan" />
    <meta property="og:locale" content="en_US"  />

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Discover Japan: Culture, Food & Fun Games">
    <meta name="twitter:description" content="This site introduces Japanese culture, food, and language to the world.">
    <meta name="twitter:image" content="https://res.cloudinary.com/dotekofm5/image/upload/v1768385674/thankjapan/backgrounds/gx8xbypllgs1qogcsvak.jpg">
    <meta name="twitter:site" content="@thankjapan0514">

    {% endblock %}

    <title>{% block title %}{% endblock %}</title>

<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; overflow-x: hidden; }
    body {
        font-family: 'Zen Antique', 'Shippori Mincho', 'Noto Serif JP', serif;
        background-color: #f3f4f6;
        padding-top: 80px; 
        background-image: repeating-radial-gradient(circle at 50% 30%, transparent 0, transparent 10px, rgba(0,0,0,0.03) 11px, rgba(0,0,0,0.03) 12px);
    }

    header.nav-bar {
        position: fixed; top: 0; left: 0; width: 100%; min-height: 80px;
        background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(10px);
        display: flex; align-items: center; justify-content: space-between;
        padding: 10px 30px; z-index: 9999; border-bottom: 4px solid #7a7a7a;
    }
    .logo-link { color: white; text-decoration: none; font-weight: bold; font-size: 1.6rem; white-space: nowrap; }
    .sns-buttons { display: flex; gap: 10px; }
    .sns-buttons a { color: #fff; font-size: 1.1rem; text-decoration: none; }
    nav { display: flex; align-items: center; gap: 15px; flex-wrap: wrap; }

    .auth-section { display: flex; align-items: center; gap: 10px; }
    .user-info, .guest-info { display: flex; align-items: center; gap: 10px; }
    .user-name { color: #ffffff !important; font-weight: bold; font-size: 0.9rem; white-space: nowrap; text-shadow: 1px 1px 2px #000; }
    .premium-badge { background: linear-gradient(45deg, #ffd700, #ffa500); color: #000 !important; padding: 2px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: bold; }
    .upgrade-link { color: #f1c40f !important; text-decoration: none; font-size: 0.8rem; font-weight: bold; border: 1px solid #f1c40f; padding: 2px 8px; border-radius: 10px; }
    .auth-btn { text-decoration: none; font-size: 0.8rem; padding: 6px 14px; border-radius: 20px; font-weight: bold; border: 1px solid #fff; color: #fff !important; white-space: nowrap; transition: 0.3s; }
    .signup { background-color: #e67e22; border: none; }

    .dropbtn, .game-link { color: #eee; background: none; border: none; font-size: 0.9rem; cursor: pointer; text-decoration: none; padding: 10px; }
    .dropdown { position: relative; }
    .dropdown-content { 
        display: none; 
        position: absolute; 
        top: 100%; 
        left: 0; 
        background-color: #1a1a1a; 
        min-width: 160px; 
        border-radius: 8px; 
        z-index: 1000; 
        max-height: 300px; 
        overflow-y: auto;
        -webkit-overflow-scrolling: touch; 
    }

    .dropdown-content a { color: #eee; padding: 12px 15px; display: block; text-decoration: none; font-size: 0.9rem; border-bottom: 1px solid #333; }

    .dropdown:hover .dropdown-content { display: block; }

    .dropdown-content.show { display: block; }

    .hero {
        margin-top: 0 !important; width: 100%; height: 750px; 
        display: flex; flex-direction: column; justify-content: center; align-items: center;
        background: linear-gradient(to bottom, rgba(0,0,0,0.1), rgba(0,0,0,0.3)), url("https://res.cloudinary.com/dotekofm5/image/upload/v1761402106/thankjapan/backgrounds/jtbdzjsksgbgehuxl954.jpg");
        background-position: center 30%; background-size: cover; color: #fff; text-align: center;
        mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
        -webkit-mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
    }
    .hero h1 { font-size: 3.5rem; letter-spacing: 8px; text-shadow: 0 2px 20px rgba(0,0,0,0.8); }
    .hero p { font-size: 1.2rem; background: rgba(0,0,0,0.5); padding: 10px 30px; border-radius: 50px; margin: 20px 0; }

    .explore-btn {
        background: linear-gradient(135deg, #fff1b8, #ffd700, #e6b800, #d4af37);
        color: #000; padding: 18px 80px; border-radius: 50px; font-weight: 700; font-size: 1.3rem;
        letter-spacing: 2px; text-decoration: none; display: inline-block; box-shadow: 0 6px 18px rgba(212, 175, 55, 0.6);
    }
    .play-game-button { background: #556b2f; color: #fff; padding: 15px 30px; border-radius: 50px; text-decoration: none; font-weight: bold; display: inline-block; }

    footer { background: #1f1f1f; text-align: center; padding: 60px 20px; font-size: 0.85rem; color: #777; }
    .footer-links a { color: #777; text-decoration: none; margin: 0 10px; }

    .header-score-badge {
        display: flex;
        align-items: center;
        gap: 6px;
        background: #1a1a1a;
        border: 1px solid #d4af37;
        padding: 3px 12px;
        border-radius: 50px;
        text-decoration: none;
        transition: 0.3s;
        margin-right: 8px;
    }

    .header-score-badge:hover {
        background: #d4af37;
    }

    .rank-emoji {
        font-size: 1.1rem;
    }

    .score-text {
        color: #d4af37;
        font-weight: 800;
        font-size: 0.95rem;
        font-family: 'Poppins', sans-serif;
    }

    .header-score-badge:hover .score-text {
        color: #1a1a1a;
    }

    .header-score-badge small {
        font-size: 0.65rem;
        margin-left: 1px;
    }

    .header-score-badge.guest {
        border-style: dashed;
        opacity: 0.8;
    }

    @media screen and (max-width: 1024px) {
        body { padding-top: 140px !important; }
        header.nav-bar { flex-direction: column; padding: 10px; gap: 8px; }
        .logo, .auth-section, .sns-buttons, nav { width: 100%; justify-content: center; margin: 0; }
        .auth-section { order: -1; padding-bottom: 5px; border-bottom: 1px solid #333; }
        .main, .hero, .container, .category-container, .game-container, #game-area, [class*="main"], [class*="container"] {
            margin-left: 0 !important; margin-right: 0 !important; width: 100% !important; max-width: 100% !important; left: 0 !important;
        }

        .header-score-badge {
            margin-bottom: 5px;
            padding: 2px 10px;
        }
    }

    @media screen and (max-width: 480px) {
        body { padding-top: 160px !important; }
        .hero { height: auto; min-height: 400px; padding: 40px 15px; }
        .hero h1 { font-size: 1.8rem; letter-spacing: 3px; }
        .explore-btn { width: 85%; padding: 15px 20px; font-size: 1.1rem; }
        .dropdown-content {
        left: auto;
        right: 0;
        }
    }

    .cookie-consent-banner {
        position: fixed; bottom: 0; left: 0; width: 100%; background-color: rgba(0,0,0,0.95);
        color: #eee; padding: 15px; z-index: 10001; display: none; flex-direction: column; align-items: center;
    }
    .cookie-consent-banner.show { display: flex; }
    .cookie-consent-btn { padding: 8px 20px; background: #e63946; color: #fff; border: none; border-radius: 5px; margin-top: 10px; cursor: pointer; font-size: 0.8rem; font-weight: bold; }
</style>
 
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ GA_TRACKING_ID }}"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', '{{ GA_TRACKING_ID }}');
    </script>

    {% block jsonld %}{% endblock %}
    
</head>

<body>
<header class="nav-bar">
    <div class="logo">
        <a class="logo-link" href="{% if lang_code == 'ja' %}{% url 'toppageja' %}{% elif lang_code == 'zh-hant' %}{% url 'toppagezhHANT' %}{% elif lang_code == 'zh-cn' %}{% url 'toppagezhCN' %}{% elif lang_code == 'ko' %}{% url 'toppageko' %}{% elif lang_code == 'it' %}{% url 'toppageit' %}{% elif lang_code == 'fr' %}{% url 'toppagefr' %}{% elif lang_code == 'de' %}{% url 'toppagede' %}{% elif lang_code == 'es-mx' %}{% url 'toppageesMX' %}{% elif lang_code == 'es-es' %}{% url 'toppageesES' %}{% elif lang_code == 'pt' %}{% url 'toppagept' %}{% elif lang_code == 'pt-br' %}{% url 'toppageptBR' %}{% elif lang_code == 'vi' %}{% url 'toppagevi' %}{% elif lang_code == 'th' %}{% url 'toppageth' %}{% elif lang_code == 'en-in' %}{% url 'toppageenIN' %}{% else %}{% url 'toppage' %}{% endif %}">
            Thank Japan
        </a>
    </div>

    <!-- SNSãƒœã‚¿ãƒ³ -->
  <div class="sns-buttons">
    <a href="https://x.com/thankjapan0514" target="_blank"><i class="fab fa-x twitter"></i></a>
    <a href="https://www.instagram.com/thankjapan/" target="_blank"><i class="fab fa-instagram"></i></a>
    <a href="https://www.facebook.com/ToruYone" target="_blank"><i class="fab fa-facebook"></i></a>
    <a href="https://www.tiktok.com/@thankjapan" target="_blank"><i class="fab fa-tiktok"></i></a>
    <a href="https://www.pinterest.com/yonetoru/" target="_blank"><i class="fab fa-pinterest"></i></a>
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.thankjapan.com" target="_blank" title="Share on LinkedIn"><i class="fab fa-linkedin"></i></a>
  </div>



    <nav>
        <div class="auth-section">
            {% if user.is_authenticated %}
                <div class="user-info">
    
                    <a href="{% url 'toppage' %}" class="header-score-badge" title="Rank: {{ user.profile.rank_info.name }}">
                        <span class="rank-emoji">{{ user.profile.rank_info.emoji }}</span>
                        <span class="score-text">ğŸ’ {{ user.profile.total_score }}<small>pt</small></span>
                    </a>
            
                    <span class="user-name">
                        <a href="{% if lang_code == 'ja' %}{% url 'account_settingsja' %}{% elif lang_code == 'fr' %}{% url 'account_settingsfr' %}{% elif lang_code == 'de' %}{% url 'account_settingsde' %}{% elif lang_code == 'it' %}{% url 'account_settingsit' %}{% elif lang_code == 'ko' %}{% url 'account_settingsko' %}{% elif lang_code == 'es-es' %}{% url 'account_settingsesES' %}{% elif lang_code == 'es-mx' %}{% url 'account_settingsesMX' %}{% elif lang_code == 'pt' %}{% url 'account_settingspt' %}{% elif lang_code == 'pt-br' %}{% url 'account_settingsptBR' %}{% elif lang_code == 'vi' %}{% url 'account_settingsvi' %}{% elif lang_code == 'th' %}{% url 'account_settingsth' %}{% elif lang_code == 'zh-hant' %}{% url 'account_settingszhHANT' %}{% elif lang_code == 'zh-cn' %}{% url 'account_settingszhCN' %}{% else %}{% url 'account_settings' %}{% endif %}" 
                        style="color: white; text-decoration: none;" 
                        onmouseover="this.style.color='red'" 
                        onmouseout="this.style.color='white'">
                        ğŸ‘¤ {{ user.username }}</a></span>

                    {% if user.profile.is_premium %}
                        <span class="premium-badge">
                            {% if lang_code == 'ja' %}
                                ğŸ’ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ 
                            {% elif lang_code == 'zh-hant' %}
                                ğŸ’ é«˜ç´šç‰ˆ
                            {% elif lang_code == 'zh-cn' %}
                                ğŸ’ é«˜çº§ç‰ˆ
                            {% elif lang_code == 'ko' %}
                                ğŸ’ í”„ë¦¬ë¯¸ì—„
                            {% elif lang_code == 'de' %}
                                ğŸ’ Premium
                            {% elif lang_code == 'fr' %}
                                ğŸ’ Premium
                            {% elif lang_code == 'es-es' or lang_code == 'es-mx' %}
                                ğŸ’ Premium
                            {% elif lang_code == 'it' %}
                                ğŸ’ Premium
                            {% elif lang_code == 'pt' or lang_code == 'pt-br' %}
                                ğŸ’ Premium
                            {% elif lang_code == 'vi' %}
                                ğŸ’ Cao cáº¥p
                            {% elif lang_code == 'th' %}
                                ğŸ’ à¸à¸£à¸µà¹€à¸¡à¸µà¸¢à¸¡
                            {% else %}
                                ğŸ’ Premium
                            {% endif %}
                        </span>
                    {% else %}
                        <a href="{% url 'premium_info' %}?next={{ request.get_full_path|urlencode }}" class="upgrade-link">
                            {% if lang_code == 'ja' %}
                                ğŸ’ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆã‚’å…¥æ‰‹
                            {% elif lang_code == 'zh-hant' %}
                                ğŸ’ ç²å–é«˜ç´šç‰ˆ
                            {% elif lang_code == 'zh-cn' %}
                                ğŸ’ è·å–é«˜çº§ç‰ˆ
                            {% elif lang_code == 'ko' %}
                                ğŸ’ í”„ë¦¬ë¯¸ì—„ êµ¬ë§¤
                            {% elif lang_code == 'de' %}
                                ğŸ’ Premium erhalten
                            {% elif lang_code == 'fr' %}
                                ğŸ’ Obtenir le mode Premium
                            {% elif lang_code == 'es-es' or lang_code == 'es-mx' %}
                                ğŸ’ ObtÃ©n Premium
                            {% elif lang_code == 'it' %}
                                ğŸ’ Ottieni Premium
                            {% elif lang_code == 'pt' or lang_code == 'pt-br' %}
                                ğŸ’ Obter Premium
                            {% elif lang_code == 'vi' %}
                                ğŸ’ Nháº­n báº£n Cao cáº¥p
                            {% elif lang_code == 'th' %}
                                ğŸ’ à¸£à¸±à¸šà¸à¸£à¸µà¹€à¸¡à¸µà¸¢à¸¡
                            {% else %}
                                ğŸ’ Get Premium
                            {% endif %}
                        </a>
                    {% endif %}
                    <a href="{% url 'player_logout' %}" class="auth-btn logout">
                        {% if lang_code == 'ja' %}
                            ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
                        {% elif lang_code == 'zh-hant' %}
                            ç™»å‡º
                        {% elif lang_code == 'zh-cn' %}
                            ç™»å‡º
                        {% elif lang_code == 'ko' %}
                            ë¡œê·¸ì•„ì›ƒ
                        {% elif lang_code == 'de' %}
                            Abmelden
                        {% elif lang_code == 'fr' %}
                            DÃ©connexion
                        {% elif lang_code == 'es-es' or lang_code == 'es-mx' %}
                            Cerrar sesiÃ³n
                        {% elif lang_code == 'it' %}
                            Esci
                        {% elif lang_code == 'pt' or lang_code == 'pt-br' %}
                            Sair
                        {% elif lang_code == 'vi' %}
                            ÄÄƒng xuáº¥t
                        {% elif lang_code == 'th' %}
                            à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸š
                        {% else %}
                            Logout
                        {% endif %}
                    </a>
                </div>
            {% else %}
                <div class="guest-info">
            
                    <a href="{% url 'player_login' %}?next={{ request.path }}" class="header-score-badge guest">
                        <span class="rank-emoji">ğŸŒ¾</span>
                        <span class="score-text">ğŸ’ 0<small>pt</small></span>
                    </a>

                    <span class="user-name">
                        {% if lang_code == 'ja' %}
                            ğŸ‘¤ ã‚²ã‚¹ãƒˆ
                        {% elif lang_code == 'zh-hant' %}
                            ğŸ‘¤ è¨ªå®¢
                        {% elif lang_code == 'zh-cn' %}
                            ğŸ‘¤ è®¿å®¢
                        {% elif lang_code == 'ko' %}
                            ğŸ‘¤ ê²ŒìŠ¤íŠ¸
                        {% elif lang_code == 'de' %}
                            ğŸ‘¤ Gast
                        {% elif lang_code == 'fr' %}
                            ğŸ‘¤ InvitÃ©
                        {% elif lang_code == 'es-es' or lang_code == 'es-mx' %}
                            ğŸ‘¤ Invitado
                        {% elif lang_code == 'it' %}
                            ğŸ‘¤ Ospite
                        {% elif lang_code == 'pt' or lang_code == 'pt-br' %}
                            ğŸ‘¤ Visitante
                        {% elif lang_code == 'vi' %}
                            ğŸ‘¤ KhÃ¡ch
                        {% elif lang_code == 'th' %}
                            ğŸ‘¤ à¸œà¸¹à¹‰à¹€à¸¢à¸µà¹ˆà¸¢à¸¡à¸Šà¸¡
                        {% else %}
                            ğŸ‘¤ Guest
                        {% endif %}
                    </span> 
                    <a href="{% url 'player_login' %}?next={{ request.path }}" class="auth-btn login">
                        {% if lang_code == 'ja' %}
                            ãƒ­ã‚°ã‚¤ãƒ³
                        {% elif lang_code == 'zh-hant' %}
                            ç™»å…¥
                        {% elif lang_code == 'zh-cn' %}
                            ç™»å½•
                        {% elif lang_code == 'ko' %}
                            ë¡œê·¸ì¸
                        {% elif lang_code == 'de' %}
                            Anmelden
                        {% elif lang_code == 'fr' %}
                            Connexion
                        {% elif lang_code == 'es-es' or lang_code == 'es-mx' %}
                            Iniciar sesiÃ³n
                        {% elif lang_code == 'it' %}
                            Accedi
                        {% elif lang_code == 'pt' or lang_code == 'pt-br' %}
                            Entrar
                        {% elif lang_code == 'vi' %}
                            ÄÄƒng nháº­p
                        {% elif lang_code == 'th' %}
                            à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š
                        {% else %}
                            Login
                        {% endif %}
                    </a>
                    <a href="{% url 'player_register' %}&lang={{ lang_code }}" class="auth-btn signup">
                        {% if lang_code == 'ja' %}
                            ç„¡æ–™ã§æ–°è¦ç™»éŒ²
                        {% elif lang_code == 'zh-hant' %}
                            å…è²»è¨»å†Š
                        {% elif lang_code == 'zh-cn' %}
                            å…è´¹æ³¨å†Œ
                        {% elif lang_code == 'ko' %}
                            ë¬´ë£Œ íšŒì›ê°€ì…
                        {% elif lang_code == 'de' %}
                            Kostenlos registrieren
                        {% elif lang_code == 'fr' %}
                            S'inscrire gratuitement
                        {% elif lang_code == 'es-es' or lang_code == 'es-mx' %}
                            RegÃ­strate gratis
                        {% elif lang_code == 'it' %}
                            Registrati gratis
                        {% elif lang_code == 'pt' or lang_code == 'pt-br' %}
                            Cadastre-se grÃ¡tis
                        {% elif lang_code == 'vi' %}
                            ÄÄƒng kÃ½ miá»…n phÃ­
                        {% elif lang_code == 'th' %}
                            à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸Ÿà¸£à¸µ
                        {% else %}
                            Sign Up Free
                        {% endif %}
                    </a>
                </div>
            {% endif %}
        </div>

        <div class="dropdown">
            <button class="dropbtn">
                {% if lang_code == 'ja' %}
                    æ—¥æœ¬èªã‚’å­¦ã¶ â–¾
                {% elif lang_code == 'zh-hant' %}
                    å­¸ç¿’æ—¥èª â–¾
                {% elif lang_code == 'zh-cn' %}
                    å­¦ä¹ æ—¥è¯­ â–¾
                {% elif lang_code == 'ko' %}
                    ì¼ë³¸ì–´ ë°°ìš°ê¸° â–¾
                {% elif lang_code == 'de' %}
                    Japanisch lernen â–¾
                {% elif lang_code == 'fr' %}
                    Apprendre le japonais â–¾
                {% elif lang_code == 'es-es' or lang_code == 'es-mx' %}
                    Aprender japonÃ©s â–¾
                {% elif lang_code == 'it' %}
                    Impara il giapponese â–¾
                {% elif lang_code == 'pt' or lang_code == 'pt-br' %}
                    Aprender japonÃªs â–¾
                {% elif lang_code == 'vi' %}
                    Há»c tiáº¿ng Nháº­t â–¾
                {% elif lang_code == 'th' %}
                    à¹€à¸£à¸µà¸¢à¸™à¸ à¸²à¸©à¸²à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™ â–¾
                {% else %}
                    Learn Japanese â–¾
                {% endif %}
            </button>
            <div class="dropdown-content">
                 <a href="{% if lang_code == 'ja' %}{% url 'category_list_ja' %}{% elif lang_code == 'zh-hant' %}{% url 'category_list_zhHant' %}{% elif lang_code == 'zh-cn' %}{% url 'category_list_zhCN' %}{% elif lang_code == 'ko' %}{% url 'category_list_ko' %}{% elif lang_code == 'de' %}{% url 'category_list_de' %}{% elif lang_code == 'fr' %}{% url 'category_list_fr' %}{% elif lang_code == 'es-es' %}{% url 'category_list_esES' %}{% elif lang_code == 'es-mx' %}{% url 'category_list_esMX' %}{% elif lang_code == 'it' %}{% url 'category_list_it' %}{% elif lang_code == 'pt' %}{% url 'category_list_pt' %}{% elif lang_code == 'pt-br' %}{% url 'category_list_ptBR' %}{% elif lang_code == 'vi' %}{% url 'category_list_vi' %}{% elif lang_code == 'th' %}{% url 'category_list_th' %}{% elif lang_code == 'en-in' %}{% url 'category_list_enIN' %}{% else %}{% url 'category_list' %}{% endif %}">
                    {% if lang_code == 'ja' %}ã‚«ãƒ†ã‚´ãƒªãƒ¼ä¸€è¦§
                    {% elif lang_code == 'zh-hant' %}é¡åˆ¥ä¸€è¦½
                    {% elif lang_code == 'zh-cn' %}ç±»åˆ«ä¸€è§ˆ
                    {% elif lang_code == 'ko' %}ì¹´í…Œê³ ë¦¬ ëª©ë¡
                    {% elif lang_code == 'de' %}Kategorieliste
                    {% elif lang_code == 'fr' %}Liste des catÃ©gories
                    {% elif lang_code == 'es-es' or lang_code == 'es-mx' %}Lista de categorÃ­as
                    {% elif lang_code == 'it' %}Elenco categorie
                    {% elif lang_code == 'pt' or lang_code == 'pt-br' %}Lista de categorias
                    {% elif lang_code == 'vi' %}Danh sÃ¡ch danh má»¥c
                    {% elif lang_code == 'th' %}à¸£à¸²à¸¢à¸à¸²à¸£à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ
                    {% else %}Category List
                    {% endif %}
                </a>
            </div>
        </div>

        <a href="{% url 'game_start' %}" class="game-link">
            {% if lang_code == 'ja' %}
                ã‚²ãƒ¼ãƒ 
            {% elif lang_code == 'zh-hant' %}
                éŠæˆ²
            {% elif lang_code == 'zh-cn' %}
                æ¸¸æˆ
            {% elif lang_code == 'ko' %}
                ê²Œì„
            {% elif lang_code == 'de' %}
                Spiel
            {% elif lang_code == 'fr' %}
                Jeu
            {% elif lang_code == 'es-es' or lang_code == 'es-mx' %}
                Juego
            {% elif lang_code == 'it' %}
                Gioco
            {% elif lang_code == 'pt' or lang_code == 'pt-br' %}
                Jogo
            {% elif lang_code == 'vi' %}
                TrÃ² chÆ¡i
            {% elif lang_code == 'th' %}
                à¹€à¸à¸¡
            {% else %}
                Game
            {% endif %}
        </a>

        <div class="lang-switch dropdown">
            <button class="dropbtn">
                {% if lang_code == 'ja' %}
                    ğŸŒ è¨€èª â–¾
                {% elif lang_code == 'zh-hant' %}
                    ğŸŒ èªè¨€ â–¾
                {% elif lang_code == 'zh-cn' %}
                    ğŸŒ è¯­è¨€ â–¾
                {% elif lang_code == 'ko' %}
                    ğŸŒ ì–¸ì–´ â–¾
                {% elif lang_code == 'de' %}
                    ğŸŒ Sprache â–¾
                {% elif lang_code == 'fr' %}
                    ğŸŒ Langue â–¾
                {% elif lang_code == 'es-es' or lang_code == 'es-mx' %}
                    ğŸŒ Idioma â–¾
                {% elif lang_code == 'it' %}
                    ğŸŒ Lingua â–¾
                {% elif lang_code == 'pt' or lang_code == 'pt-br' %}
                    ğŸŒ Idioma â–¾
                {% elif lang_code == 'vi' %}
                    ğŸŒ NgÃ´n ngá»¯ â–¾
                {% elif lang_code == 'th' %}
                    ğŸŒ à¸ à¸²à¸©à¸² â–¾
                {% else %}
                    ğŸŒ Language â–¾
                {% endif %}
            </button>
            <div class="dropdown-content">
                <a href="{% url 'toppage' %}">English</a>
                <a href="{% url 'toppageenIN' %}">English (India)</a>
                <a href="{% url 'toppageit' %}">Italiano</a>
                <a href="{% url 'toppagefr' %}">FranÃ§ais</a>
                <a href="{% url 'toppagede' %}">Deutsch</a>
                <a href="{% url 'toppagept' %}">PortuguÃªs</a>
                <a href="{% url 'toppageptBR' %}">PortuguÃªs (Brasil)</a>
                <a href="{% url 'toppageja' %}">æ—¥æœ¬èª</a>
                <a href="{% url 'toppageesES' %}">EspaÃ±ol</a>
                <a href="{% url 'toppageesMX' %}">EspaÃ±ol (MÃ©xico)</a>
                <a href="{% url 'toppagevi' %}">Tiáº¿ng Viá»‡t</a>
                <a href="{% url 'toppageko' %}">í•œêµ­ì–´</a>
                <a href="{% url 'toppageth' %}">à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</a>
                <a href="{% url 'toppagezhHANT' %}">ç¹é«”ä¸­æ–‡</a>
                <a href="{% url 'toppagezhCN' %}">ç®€ä½“ä¸­æ–‡</a>
            </div>
        </div>
    </nav>
</header>

{% block content %}{% endblock %}

{% if user.is_authenticated and user.profile.privacy_policy_version != "2026-01" %}
<div id="policyUpdateBanner" style="position: fixed; bottom: 0; left: 0; width: 100%; background: #b22d35; color: white; padding: 20px; z-index: 10002; text-align: center; box-shadow: 0 -5px 15px rgba(0,0,0,0.3);">
    <p style="margin: 0 0 10px 0; font-size: 0.95rem; line-height: 1.5;">
        <strong>Privacy Policy Updated (January 2026)</strong><br>
        We have updated our policy regarding Premium subscriptions and AI usage. 
        Please confirm that you agree to the new terms.
    </p>
    <div style="display: flex; justify-content: center; gap: 15px;">
        <button onclick="agreeToPolicy()" style="padding: 10px 25px; background: white; color: #b22d35; border: none; border-radius: 25px; font-weight: bold; cursor: pointer; font-size: 0.9rem;">
            I Agree
        </button>
        <a href="{% url 'privacy_policy' %}" target="_blank" style="color: white; text-decoration: underline; font-size: 0.8rem; align-self: center;">Read Policy</a>
    </div>
</div>
{% endif %}

<script>
function goToCategoryList() {
    const menuUrl = localStorage.getItem('tj_category_menu_url');
    if (menuUrl) {
        
        window.location.href = menuUrl;
    } else {
        window.location.href = "/categories/"; 
    }
}

document.addEventListener('DOMContentLoaded', function() {
    const dropdowns = document.querySelectorAll('.dropdown');

    dropdowns.forEach(dropdown => {
        const btn = dropdown.querySelector('.dropbtn');
        const content = dropdown.querySelector('.dropdown-content');

        if (btn && content) {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
                
                document.querySelectorAll('.dropdown-content').forEach(dc => {
                    if (dc !== content) dc.classList.remove('show');
                });

                content.classList.toggle('show');
            });
        }
    });

    document.addEventListener('click', function() {
        document.querySelectorAll('.dropdown-content').forEach(dc => {
            dc.classList.remove('show');
        });
    });

    const cookieBanner = document.getElementById('cookieConsentBanner');
    const acceptBtn = document.getElementById('acceptCookiesBtn');
    const manageBtn = document.getElementById('manageCookiesBtn');

    function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for(let i=0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    }

    function setCookie(name, value, days) {
        let expires = "";
        if (days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + (value || "")  + expires + "; path=/";
    }

    if (cookieBanner && !getCookie('cookie_consent')) {
        setTimeout(() => { cookieBanner.classList.add('show'); }, 1000);
    }

    if (acceptBtn) {
        acceptBtn.addEventListener('click', function() {
            setCookie('cookie_consent', 'accepted', 365);
            cookieBanner.classList.remove('show');
        });
    }

    if (manageBtn) {
        manageBtn.addEventListener('click', function() {
            window.location.href = "{% url 'privacy_policy' %}#cookie-settings"; 
        });
    }
});

function agreeToPolicy() {
    fetch("{% url 'update_policy_agreement' %}", {
        method: 'POST',
        headers: {
            'X-CSRFToken': '{{ csrf_token }}',
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ version: "2026-01" })
    }).then(response => {
        if (response.ok) {
            const banner = document.getElementById('policyUpdateBanner');
            if (banner) banner.style.display = 'none';
        }
    });
}
</script>

</body>
</html>

